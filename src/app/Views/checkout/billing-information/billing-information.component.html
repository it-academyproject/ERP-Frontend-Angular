<div class="container-fluid bg-erp-silver pb-4">
  <div class="card border-0 col-10 mx-auto">
    <div class="card-body text-center bg-erp-silver pt-5">
      <h2 class="card-title fw-bold fs-1">Billing Information</h2>
    </div>
    <div class="card-body">
      <form action=""
            class="row g-3 needs-validation"
            [formGroup]="billingForm"
            (ngSubmit)="onSubmit()"
            novalidate>
        <div class="col-12 col-md-6 p-4">
          <input type="text"
                 placeholder="First name"
                 class="form-control"
                 formControlName="inputName"
                 [ngClass]="{'is-invalid':isValidInput('inputName')}">
          <div class="invalid-feedback">
            <span *ngIf="billingForm.get('inputName')?.errors?.required">
              Your name is required
            </span>
            <span *ngIf="billingForm.get('inputName')?.errors?.minlength">
              Minimum {{billingForm.get('inputName')?.errors?.minlength.requiredLength}} characters required
            </span>
          </div>
        </div>
        <div class="col-12 col-md-6 p-4">
          <input type="text"
                 placeholder="Last name"
                 class="form-control"
                 formControlName="inputSurname"
                 [ngClass]="{'is-invalid':isValidInput('inputSurname')}">
          <div class="invalid-feedback">
            <span *ngIf="billingForm.get('inputSurname')?.errors?.required">
              Your surname is required
            </span>
            <span *ngIf="billingForm.get('inputSurname')?.errors?.minlength">
              Minimum {{billingForm.get('inputSurname')?.errors?.minlength.requiredLength}} characters required
            </span>
          </div>
        </div>
        <div class="col-12 col-md-6 p-4">
          <input type="text"
          placeholder="DNI"
          class="form-control"
          formControlName="inputDNI"
          [ngClass]="{'is-invalid':isValidInput('inputDNI')}">
          <div class="invalid-feedback">
            <span *ngIf="billingForm.get('inputDNI')?.errors?.required">
              Your ID is required
            </span>
            <span *ngIf="billingForm.get('inputDNI')?.errors?.pattern">
              <small class="small fw-bold"> Provide a valid CIF (1 letter 7 numbers 1 letter)</small>
            </span>
            <span *ngIf="billingForm.get('inputDNI')?.errors?.pattern">
              <small class="small fw-bold"> or valid DNI (8 numbers 1 letter)</small>
            </span>
          </div>
        </div>
        <div class="col-12 col-md-6 p-4">
          <input type="email"
                 placeholder="Email"
                 class="form-control"
                 formControlName="inputEmail"
                 [ngClass]="{'is-invalid':isValidInput('inputEmail')}">
          <div class="invalid-feedback">
            <span *ngIf="billingForm.get('inputEmail')?.errors?.required">
              Your email is required
            </span>
            <span *ngIf="billingForm.get('inputEmail')?.errors?.pattern">
              Email format is invalid
            </span>
          </div>
        </div>
        <div class="row mx-auto"
             formGroupName="address">
          <div class="col-md-12 py-4">
            <input type="text"
                   placeholder="Address"
                   class="form-control"
                   formControlName="inputAddress"
                   [ngClass]="{'is-invalid':isValidInput('address.inputAddress')}">
            <div class="invalid-feedback">
              <span *ngIf="billingForm.get('address.inputAddress')?.errors?.required">
                Your address is required
              </span>
            </div>
          </div>
          <div class="col-md-3 py-4">
            <select class="form-select"
                    formControlName="inputCountry"
                    (change)="onChangeCountry($event.target.value)"
                    [ngClass]="{'is-invalid':isValidInput('address.inputCountry')}">
                    <option disabled value="">Country</option>
                    <option *ngFor="let country of countryInfo; let i = index"
                      value="{{i}}">{{country.CountryName}}</option>
            </select>
            <div class="invalid-feedback">
              <span *ngIf="billingForm.get('address.inputCountry')?.errors?.required">
                Your country is required
              </span>
            </div>
          </div>
          <div class="col-md-3 py-4">
            <select class="form-select"
                    formControlName="inputProvince"
                    (change)="onChangeProvince($event.target.value)"
                    [ngClass]="{'is-invalid':isValidInput('address.inputProvince')}">
                    <option disabled value="">Province</option>
                    <option *ngFor="let province of provinceInfo; let j = index"
                      value="{{j}}">{{province.StateName}}</option>
            </select>
            <div class="invalid-feedback">
              <span *ngIf="billingForm.get('address.inputProvince')?.errors?.required">
                Your province is required
              </span>
            </div>
          </div>
          <div class="col-md-3 py-4">
            <input type="text"
                   placeholder="City"
                   class="form-control"
                   formControlName="inputCity"
                   [ngClass]="{'is-invalid':isValidInput('address.inputCity')}">
            <div class="invalid-feedback">
              <span *ngIf="billingForm.get('address.inputCity')?.errors?.required">
                Your city is required.
              </span>
              <span *ngIf="billingForm.get('address.inputCity')?.errors?.minlength">
                Minimum {{billingForm.get('address.inputCity')?.errors?.minlength.requiredLength}} characters required
              </span>
            </div>
          </div>
          <div class="col-md-3 py-4">
            <input type="text"
            placeholder="ZIP Code"
                   class="form-control"
                   formControlName="inputZIP"
                   [ngClass]="{'is-invalid':isValidInput('address.inputZIP')}">
            <div class="invalid-feedback">
              <span *ngIf="billingForm.get('address.inputZIP')?.errors?.required">
                Your zip code is required
              </span>
            </div>
          </div>
        </div>         
        <div *ngIf="shipAddress" class="row mx-auto"
             formGroupName="shippingAddress">
             <h2 class="card-title fw-bold fs-1">Shipping Information</h2>
             <div class="col-12 col-md-6 p-4">
            <input type="text"
                    placeholder="Name"
                    class="form-control"
                    formControlName="inputNameShipping"
                    [ngClass]="{'is-invalid':isValidInput('inputName')}">
                    <div class="invalid-feedback">
              <span *ngIf="billingForm.get('inputNameShipping')?.errors?.required">
                Your name is required
              </span>
              <span *ngIf="billingForm.get('inputNameShipping')?.errors?.minlength">
                Minimum {{billingForm.get('inputName')?.errors?.minlength.requiredLength}} characters required
              </span>
            </div>
          </div>
          <div class="col-12 col-md-6 p-4">
            <input type="text"
                   placeholder="Last Name"
                   class="form-control"
                   formControlName="inputSurnameShipping"
                   [ngClass]="{'is-invalid':isValidInput('inputSurname')}">
            <div class="invalid-feedback">
              <span *ngIf="billingForm.get('inputSurnameShipping')?.errors?.required">
                Your surname is required
              </span>
              <span *ngIf="billingForm.get('inputSurnameShipping')?.errors?.minlength">
                Minimum {{billingForm.get('inputSurname')?.errors?.minlength.requiredLength}} characters required
              </span>
            </div>
          </div>
          <div class="col-md-12 py-4">
            <input type="text"
                    placeholder="Address"
                    class="form-control"
                    formControlName="inputAddressShipping"
                    [ngClass]="{'is-invalid':isValidInput('address.inputAddress')}">
            <div class="invalid-feedback">
              <span *ngIf="billingForm.get('address.inputAddress')?.errors?.required">
                Your address is required
              </span>
            </div>
          </div>
          <div class="col-md-3 py-4">
            <select class="form-select"
                    formControlName="inputCountryShipping"
                    (change)="onChangeCountry($event.target.value)"
                    [ngClass]="{'is-invalid':isValidInput('address.inputCountry')}">
                    <option disabled value="">Country</option>
                    <option *ngFor="let country of countryInfo; let i = index"
            value="{{i}}">{{country.CountryName}}</option>
          </select>
          <div class="invalid-feedback">
            <span *ngIf="billingForm.get('address.inputCountry')?.errors?.required">
              Your country is required
            </span>
            </div>
          </div>
          <div class="col-md-3 py-4">
            <select class="form-select"
                    formControlName="inputProvinceShipping"
                    (change)="onChangeProvince($event.target.value)"
                    [ngClass]="{'is-invalid':isValidInput('address.inputProvince')}">
                    <option disabled value="">Province</option>
                    <option *ngFor="let province of provinceInfo; let j = index"
          value="{{j}}">{{province.StateName}}</option>
          </select>
          <div class="invalid-feedback">
            <span *ngIf="billingForm.get('address.inputProvince')?.errors?.required">
              Your province is required
            </span>
          </div>
        </div>
        <div class="col-md-3 py-4">
          <input type="text"
                  placeholder="City"
                  class="form-control"
                  formControlName="inputCityShipping"
                  [ngClass]="{'is-invalid':isValidInput('address.inputCity')}">
          <div class="invalid-feedback">
            <span *ngIf="billingForm.get('address.inputCity')?.errors?.required">
              Your city is required.
            </span>
            <span *ngIf="billingForm.get('address.inputCity')?.errors?.minlength">
              Minimum {{billingForm.get('address.inputCity')?.errors?.minlength.requiredLength}} characters required
            </span>
          </div>
        </div>
        <div class="col-md-3 py-4">
          <input type="text"
                  placeholder="ZIP Code"
                  class="form-control"
                  formControlName="inputZIPshipping"
                  [ngClass]="{'is-invalid':isValidInput('address.inputZIP')}">
          <div class="invalid-feedback">
            <span *ngIf="billingForm.get('address.inputZIP')?.errors?.required">
                Your zip code is required
              </span>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
  <div class="col-12 col-md-6 col-lg-8 m-3">
    <div class="col-6 mt-3">
        <input class="m-1" type="checkbox" [(ngModel)]="shipAddress" name="shipAddress" id="shipAddress">
        <label for="shipAddress">Send to different address</label>
    </div>
  </div>
</div> 
